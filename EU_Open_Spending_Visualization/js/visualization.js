window.onload = function()
{
	Map(),
	Bar ();
	Line();
}

var EU = [40,56,100,196,203,208,233,246,250,276,300,348,191,372,380,428,440,442,470,528,616,620,642,703,705,724,752,826];
var data;
var categorytotal = {"Bureaucracy":{"total":253605113808.78973,"2007":10722626107.950003,"2008":27654568472.29001,"2009":20257139114.38999,"2011":44047133260.12998,"2010":22187160694.35999,"2013":104425289079.94975,"2012":24311197079.720043},"Climate":{"total":253605113808.78973,"2007":10722626107.950003,"2008":27654568472.29001,"2009":20257139114.38999,"2011":44047133260.12998,"2010":22187160694.35999,"2013":104425289079.94975,"2012":24311197079.720043},"Development Aid":{"total":253605113808.78973,"2007":10722626107.950003,"2008":27654568472.29001,"2009":20257139114.38999,"2011":44047133260.12998,"2010":22187160694.35999,"2013":104425289079.94975,"2012":24311197079.720043},"missing":{"total":253605113808.78973,"2007":10722626107.950003,"2008":27654568472.29001,"2009":20257139114.38999,"2011":44047133260.12998,"2010":22187160694.35999,"2013":104425289079.94975,"2012":24311197079.720043},"Industry":{"total":253605113808.78973,"2007":10722626107.950003,"2008":27654568472.29001,"2009":20257139114.38999,"2011":44047133260.12998,"2010":22187160694.35999,"2013":104425289079.94975,"2012":24311197079.720043},"Political":{"total":253605113808.78973,"2007":10722626107.950003,"2008":27654568472.29001,"2009":20257139114.38999,"2011":44047133260.12998,"2010":22187160694.35999,"2013":104425289079.94975,"2012":24311197079.720043},"Budget":{"total":253605113808.78973,"2007":10722626107.950003,"2008":27654568472.29001,"2009":20257139114.38999,"2011":44047133260.12998,"2010":22187160694.35999,"2013":104425289079.94975,"2012":24311197079.720043},"Research":{"total":253605113808.78973,"2007":10722626107.950003,"2008":27654568472.29001,"2009":20257139114.38999,"2011":44047133260.12998,"2010":22187160694.35999,"2013":104425289079.94975,"2012":24311197079.720043},"Culture":{"total":253605113808.78973,"2007":10722626107.950003,"2008":27654568472.29001,"2009":20257139114.38999,"2011":44047133260.12998,"2010":22187160694.35999,"2013":104425289079.94975,"2012":24311197079.720043},"Social":{"total":253605113808.78973,"2007":10722626107.950003,"2008":27654568472.29001,"2009":20257139114.38999,"2011":44047133260.12998,"2010":22187160694.35999,"2013":104425289079.94975,"2012":24311197079.720043},"Security":{"total":253605113808.78973,"2007":10722626107.950003,"2008":27654568472.29001,"2009":20257139114.38999,"2011":44047133260.12998,"2010":22187160694.35999,"2013":104425289079.94975,"2012":24311197079.720043},"Agriculture":{"total":253605113808.78973,"2007":10722626107.950003,"2008":27654568472.29001,"2009":20257139114.38999,"2011":44047133260.12998,"2010":22187160694.35999,"2013":104425289079.94975,"2012":24311197079.720043},"Transport":{"total":253605113808.78973,"2007":10722626107.950003,"2008":27654568472.29001,"2009":20257139114.38999,"2011":44047133260.12998,"2010":22187160694.35999,"2013":104425289079.94975,"2012":24311197079.720043},"Economy":{"total":253605113808.78973,"2007":10722626107.950003,"2008":27654568472.29001,"2009":20257139114.38999,"2011":44047133260.12998,"2010":22187160694.35999,"2013":104425289079.94975,"2012":24311197079.720043}}
var countrytotal = {"458":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"740":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"214":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"620":{"2009":0,"2007":167156528.7,"2008":194988424.02000004,"total":1621765294.4500003,"2011":289008184.5800002,"2010":272627304.08000016,"2013":428885511.59999996,"2012":269099341.4700001},"212":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"626":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"624":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"090":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"666":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"760":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"570":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"663":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"662":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"096":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"660":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"010":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"132":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"012":{"2009":0,"2007":100923.09,"2008":279538.09,"total":27492235.15,"2011":22907684.6,"2010":132585.34,"2013":2964072.58,"2012":1107431.45},"516":{"2009":13898.02,"2007":786072.0,"2008":40000.0,"total":10389659.399999999,"2011":2559729.04,"2010":1520949.96,"2013":4004938.0,"2012":1464072.38},"498":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"136":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"016":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"178":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"574":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"744":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"250":{"2009":857535.5700000001,"2007":1180186960.9600008,"2008":2293211704.1299973,"total":14673008505.56999,"2011":2137847465.0899963,"2010":3032499044.43,"2013":3892785480.919994,"2012":2135620314.4700012},"174":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"050":{"2009":2295.1,"2007":2471063.5799999996,"2008":38702904.800000004,"total":180922081.85,"2011":29046676.030000005,"2010":6730254.52,"2013":35973002.49999999,"2012":67995885.32},"051":{"2009":0,"2007":7415199.0,"2008":18132750.18,"total":156028525.68,"2011":22839789.64,"2010":52020325.5,"2013":26693987.920000006,"2012":28926473.44},"492":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"170":{"2009":0,"2007":496850.0,"2008":3459972.18,"total":60463816.82,"2011":10687058.0,"2010":13383873.950000001,"2013":13228574.96,"2012":19207487.729999997},"854":{"2009":0,"2007":2103174.0,"2008":1865433.5799999998,"total":45209548.300000004,"2011":23500360.37,"2010":10189145.42,"2013":4551820.0,"2012":2999614.93},"344":{"2009":0,"2007":7322.0,"2008":846019.0,"total":2061790.8699999999,"2011":32326.61,"2010":561905.82,"2013":487109.44,"2012":127108.0},"690":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"826":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"850":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"086":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"694":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"060":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"554":{"2009":0,"2007":119314.88,"2008":962195.1900000002,"total":10424442.64,"2011":79907.27,"2010":58947.0,"2013":6052297.699999999,"2012":3151780.6},"175":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"239":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"858":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"450":{"2009":0,"2007":8180435.25,"2008":5244971.84,"total":26186266.38,"2011":1335814.0,"2010":1355923.0,"2013":7844843.98,"2012":2224278.31},"484":{"2009":0,"2007":891169.54,"2008":19098451.74,"total":54382290.11,"2011":5546496.1,"2010":2659504.44,"2013":16071923.540000001,"2012":10114744.75},"222":{"2009":0,"2007":120000.0,"2008":2551140.56,"total":96542776.82000001,"2011":46569744.04000001,"2010":32600000.0,"2013":9356497.239999998,"2012":5345394.98},"818":{"2009":0,"2007":2792007.2800000003,"2008":130183688.51,"total":522364065.99000007,"2011":25519550.73,"2010":121685033.52000001,"2013":86556116.92000002,"2012":155627669.03000003},"288":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"540":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"404":{"2009":0,"2007":10396793.82,"2008":23908179.38,"total":106355063.45,"2011":8454947.2,"2010":23413837.730000004,"2013":26375301.459999997,"2012":13806003.86},"340":{"2009":0,"2007":2773445.0,"2008":8800451.24,"total":172474097.07999998,"2011":3167672.61,"2010":59386160.0,"2013":54197920.0,"2012":44148448.23},"796":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"184":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"400":{"2009":0,"2007":3680863.0,"2008":42984279.49999999,"total":396432843.63,"2011":77747178.25,"2010":106454524.0,"2013":118939508.99999999,"2012":46626489.879999995},"480":{"2009":0,"2007":11649500.0,"2008":849212.19,"total":211015763.2,"2011":556904.0,"2010":72452000.0,"2013":66781397.92,"2012":58726749.09},"144":{"2009":0,"2007":3358077.0,"2008":5155836.130000001,"total":12489415.5,"2011":1761823.12,"2010":320375.25,"2013":1593604.0,"2012":299700.0},"504":{"2009":0,"2007":56555078.94,"2008":227195997.89000002,"total":1029235403.5800002,"2011":48657497.360000014,"2010":248790932.69,"2013":328470997.22,"2012":119564899.48},"040":{"2009":0,"2007":264954392.4299999,"2008":421123864.24000037,"total":3401265522.930002,"2011":644562990.8799999,"2010":580615358.1099998,"2013":805519863.6800005,"2012":684489053.5900015},"348":{"2009":0,"2007":56049173.96000003,"2008":116031390.27999996,"total":957714967.44,"2011":148844983.08000004,"2010":167190450.20999998,"2013":246753818.04000005,"2012":222845151.87000003},"092":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"500":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"408":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"630":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"752":{"2009":0,"2007":214173965.08000004,"2008":416942388.4400002,"total":3187680387.0799994,"2011":505238048.38999987,"2010":425899568.1900001,"2013":1140884955.959999,"2012":484541461.0200001},"462":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"336":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"678":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"064":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"454":{"2009":0,"2007":2438355.1500000004,"2008":3492541.41,"total":36039884.6,"2011":5852595.640000001,"2010":17214965.53,"2013":6345639.44,"2012":695787.4299999999},"208":{"2009":0,"2007":208858792.74000004,"2008":287484126.0500001,"total":3486109023.42,"2011":671024279.2299994,"2010":793000291.0600001,"2013":851106306.3600005,"2012":674635227.98},"674":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"716":{"2009":0,"2007":4095098.0,"2008":6955686.0,"total":63292708.51,"2011":12546757.51,"2010":9810607.0,"2013":24112000.0,"2012":5772560.0},"562":{"2009":0,"2007":6000002.0,"2008":4687.0,"total":16109221.549999999,"2011":361240.0,"2010":918372.6,"2013":6710528.02,"2012":2114391.9299999997},"466":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"670":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"203":{"2009":196.39999999999998,"2007":46461938.139999986,"2008":91109008.90000002,"total":773498356.9300001,"2011":139394660.47999996,"2010":164065932.85000005,"2013":179365130.60000005,"2012":153101489.56000003},"242":{"2009":0,"2007":59300.0,"2008":526200.0,"total":11721400.26,"2011":4424689.84,"2010":1773039.5,"2013":3128170.92,"2012":1810000.0},"710":{"2009":0,"2007":4592057.0,"2008":140235430.59,"total":675173070.8,"2011":131481793.89999999,"2010":137015635.67,"2013":38580116.739999995,"2012":223268036.89999998},"120":{"2009":0,"2007":12115522.31,"2008":5379558.59,"total":70089055.53999999,"2011":9974837.25,"2010":1802252.5,"2013":34376878.48,"2012":6440006.41},"024":{"2009":0,"2007":1151873.18,"2008":1454060.92,"total":4537004.399999999,"2011":1357875.94,"2010":8692.76,"2013":0.0,"2012":564501.6},"158":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"260":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"124":{"2009":0,"2007":9125257.02,"2008":10175766.139999997,"total":152120699.89999998,"2011":16848521.369999997,"2010":15418400.920000004,"2013":73118910.69999999,"2012":27433843.750000004},"218":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"748":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"686":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"226":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"764":{"2009":0,"2007":3202706.54,"2008":6542736.49,"total":45006799.32,"2011":8473396.690000001,"2010":5874948.11,"2013":7056887.26,"2012":13856124.229999999},"268":{"2009":0,"2007":8917394.829999998,"2008":37056587.6,"total":239908580.16,"2011":33205104.299999997,"2010":43227840.7,"2013":78717718.46000001,"2012":38783934.27},"084":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"028":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"162":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"233":{"2009":0,"2007":23139902.009999998,"2008":26888076.189999983,"total":370741765.56000006,"2011":28284291.180000007,"2010":135898106.60000005,"2013":97402995.62,"2012":59128393.959999986},"608":{"2009":0,"2007":15180718.200000001,"2008":1987596.73,"total":72731868.38,"2011":37306985.92,"2010":217845.97,"2013":15696175.74,"2012":2342545.82},"470":{"2009":0,"2007":11075170.840000002,"2008":11992907.579999998,"total":130690757.66,"2011":16201225.239999998,"2010":39400500.69,"2013":37565605.96000001,"2012":14455347.35},"638":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"652":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"659":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"585":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"496":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"008":{"2009":0,"2007":18128612.06,"2008":11394540.999999998,"total":111555502.11,"2011":20053116.890000004,"2010":13346020.770000001,"2013":28721862.580000002,"2012":19911348.81},"262":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"860":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"732":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"188":{"2009":0,"2007":333249.27,"2008":1006000.0,"total":40252731.45,"2011":7029479.05,"2010":3762633.23,"2013":25382016.0,"2012":2739353.9},"324":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"258":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"166":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"478":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"414":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"398":{"2009":0,"2007":1051232.25,"2008":3200499.2900000005,"total":13667937.940000001,"2011":3255055.87,"2010":2114316.95,"2013":3113728.58,"2012":933105.0},"535":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"417":{"2009":0,"2007":16053160.590000002,"2008":1804342.6000000003,"total":93453189.8,"2011":13548981.549999999,"2010":9101168.5,"2013":37014781.44,"2012":15930755.120000001},"533":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"076":{"2009":0,"2007":571608.05,"2008":23820022.52,"total":119054460.96000001,"2011":33521794.05,"2010":9031258.94,"2013":38007796.68,"2012":14101980.72},"531":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"332":{"2009":0,"2007":1241140.92,"2008":2301436.0999999996,"total":24507561.860000003,"2011":996036.23,"2010":7300000.0,"2013":10477786.880000003,"2012":2191161.73},"296":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"612":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"204":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"372":{"2009":0,"2007":100979450.22000003,"2008":128380906.68999995,"total":1510685104.3700006,"2011":232452659.33000016,"2010":340555534.8800001,"2013":419456068.20000035,"2012":288860485.05000013},"292":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"152":{"2009":0,"2007":1504677.08,"2008":2960325.0,"total":34197452.21,"2011":6234651.319999999,"2010":3173593.99,"2013":12620937.9,"2012":7703266.92},"728":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"376":{"2009":0,"2007":109356717.44,"2008":169024310.53,"total":1139143992.8500001,"2011":176876400.01000002,"2010":122828711.60999997,"2013":383261957.21999997,"2012":177795896.0400002},"591":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"882":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"074":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"862":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"887":{"2009":0,"2007":940042.39,"2008":2118775.2199999997,"total":33396699.82,"2011":1083752.66,"2010":7025000.0,"2013":16313136.159999998,"2012":5915993.390000001},"558":{"2009":0,"2007":22979535.0,"2008":11604926.620000001,"total":53296635.04000001,"2011":1459316.0,"2010":4582010.88,"2013":10051604.54,"2012":2619242.0},"070":{"2009":0,"2007":37529611.13000001,"2008":47302685.35,"total":273789934.36,"2011":20124965.32,"2010":27942178.339999992,"2013":99917607.78000003,"2012":40972886.43999998},"654":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"704":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"312":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"706":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"196":{"2009":0,"2007":14955725.419999996,"2008":30511603.01,"total":220945410.24,"2011":31267149.19,"2010":41320636.36000001,"2013":73057134.66,"2012":29833161.600000013},"191":{"2009":0,"2007":6994622.49,"2008":10338016.35,"total":250249440.33999997,"2011":35717460.25999998,"2010":32958002.880000003,"2013":118261082.26,"2012":45980256.1},"316":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"702":{"2009":0,"2007":3031000.0,"2008":1273753.44,"total":15543337.32,"2011":540908.0700000001,"2010":3059153.77,"2013":3089352.0,"2012":4549170.04},"192":{"2009":0,"2007":39369.22,"2008":15584.0,"total":1693042.22,"2011":474779.0,"2010":3600.0,"2013":847500.0,"2012":312210.0},"270":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"392":{"2009":0,"2007":4916978.780000001,"2008":10956549.17,"total":66058816.580000006,"2011":8391580.65,"2010":7361997.170000001,"2013":25825838.120000005,"2012":8605872.69},"052":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"116":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"238":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"275":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"276":{"2009":178081.08,"2007":996279396.3399982,"2008":1860432216.299999,"total":14062040308.420015,"2011":2385157247.3399987,"2010":2099972884.5300033,"2013":3921643850.400011,"2012":2798376632.430005},"112":{"2009":0,"2007":2021313.0,"2008":2397502.28,"total":24901199.299999997,"2011":1487860.0699999998,"2010":34166.9,"2013":15506714.7,"2012":3453642.3499999996},"032":{"2009":0,"2007":2434270.25,"2008":6360953.68,"total":32670765.519999996,"2011":6338772.9399999995,"2010":5013640.71,"2013":7970923.899999999,"2012":4552204.04},"634":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"682":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"031":{"2009":0,"2007":412115.0,"2008":1954033.0,"total":105973958.14999998,"2011":14570294.91,"2010":28616725.83,"2013":57525084.97999999,"2012":2895704.43},"036":{"2009":0,"2007":368521.94,"2008":3677621.8,"total":48137728.18,"2011":5281758.680000002,"2010":1472918.17,"2013":28707528.619999997,"2012":8629378.969999999},"056":{"2009":60816.73999999999,"2007":836435814.8899987,"2008":1626560063.5999992,"total":13762437083.470003,"2011":2427467423.3500047,"2010":2025490103.9399984,"2013":4016241424.6599936,"2012":2830181436.290008},"578":{"2009":0,"2007":64007241.029999994,"2008":126219975.42,"total":1129568181.9899998,"2011":166070603.79999983,"2010":150227563.9700001,"2013":394067759.4599999,"2012":228975038.3099999},"756":{"2009":0,"2007":196712133.10999998,"2008":321700085.1199999,"total":2952718996.8299985,"2011":499970153.0800011,"2010":419201435.5,"2013":1024742301.3399987,"2012":490392888.67999876},"832":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"833":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"795":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"831":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"792":{"2009":0,"2007":74003520.56000002,"2008":40844385.930000015,"total":688381025.0400001,"2011":175488317.98,"2010":89778007.03999998,"2013":113566405.77999999,"2012":194700387.75000012},"762":{"2009":0,"2007":3478644.8700000006,"2008":10354360.4,"total":40485809.970000006,"2011":18000000.0,"2010":7765934.5,"2013":643870.2,"2012":243000.0},"356":{"2009":0,"2007":892136.04,"2008":71805159.65,"total":334410050.3,"2011":23754329.290000003,"2010":13918752.19,"2013":199767842.72,"2012":24271830.41},"876":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"072":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"772":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"266":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"643":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"156":{"2009":0,"2007":29949008.569999997,"2008":18452503.7,"total":133370735.21000001,"2011":26053200.03,"2010":9160542.269999998,"2013":23193331.900000002,"2012":26562148.740000002},"798":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"524":{"2009":0,"2007":3023228.55,"2008":28292786.84,"total":155689244.28,"2011":22045253.5,"2010":37170977.0,"2013":62454578.0,"2012":2702420.39},"428":{"2009":431.59,"2007":20660003.250000004,"2008":30465169.079999987,"total":292689533.89,"2011":32426260.580000002,"2010":75732895.77000001,"2013":92930310.05999999,"2012":40474463.56},"320":{"2009":0,"2007":8000.0,"2008":4954244.12,"total":27574479.839999996,"2011":10559419.110000001,"2010":3106540.0,"2013":3739397.9,"2012":5206878.709999999},"534":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"520":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"254":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"368":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"068":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"231":{"2009":849.63,"2007":5793575.85,"2008":20000.0,"total":23164272.810000002,"2011":3003627.05,"2010":6434102.16,"2013":1181226.72,"2012":6730891.4},"410":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"364":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"422":{"2009":0,"2007":16118008.38,"2008":37412141.830000006,"total":86062474.29000002,"2011":5552018.640000001,"2010":3156800.3800000004,"2013":18731093.82,"2012":5092411.24},"528":{"2009":1835.81,"2007":494174608.24000007,"2008":708317108.3199995,"total":6533505092.259996,"2011":1074670673.2400002,"2010":1125777560.2200005,"2013":1905012999.4799936,"2012":1225550306.9500022},"360":{"2009":0,"2007":1523631.72,"2008":3425305.39,"total":389046342.44000006,"2011":6296725.680000001,"2010":185249043.3,"2013":186089179.4,"2012":6462456.95},"426":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"586":{"2009":0,"2007":33840141.25,"2008":1149368.65,"total":159842610.70000002,"2011":19682173.560000002,"2010":2134496.0,"2013":29832056.459999997,"2012":73204374.78},"616":{"2009":0,"2007":177262656.6700001,"2008":257137673.07999998,"total":2071469035.780001,"2011":296218048.92,"2010":649192280.0199999,"2013":400638993.24000025,"2012":291019383.85000056},"584":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"776":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"894":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"583":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"580":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"581":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"300":{"2009":0,"2007":257091590.73999995,"2008":300741006.56000006,"total":2461577790.0700006,"2011":414181953.33,"2010":431580861.58,"2013":611034221.26,"2012":446948156.6000005},"442":{"2009":2957835.69,"2007":433143512.95,"2008":349686351.43,"total":3392617932.499999,"2011":716363015.309999,"2010":476465323.57000005,"2013":652455855.3200009,"2012":761546038.2299987},"180":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"440":{"2009":0,"2007":64362570.61,"2008":91275867.06000017,"total":798722896.3000002,"2011":168852269.35000002,"2010":281727493.52,"2013":73572375.08,"2012":118932320.6799999},"304":{"2009":0,"2007":42111944.0,"2008":42608244.0,"total":259137158.11,"2011":44565896.11,"2010":43726244.0,"2013":57434280.0,"2012":28690550.0},"446":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"020":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"724":{"2009":0,"2007":468152398.0899996,"2008":917304568.370001,"total":10970623570.53999,"2011":2023917595.8199959,"2010":2120858798.3100004,"2013":2561906237.139991,"2012":2878483972.810001},"380":{"2009":51794.649999999994,"2007":779794260.2499985,"2008":1271381197.03,"total":9933838254.609995,"2011":1603562334.6199985,"2010":1571346305.9099994,"2013":2936077623.920001,"2012":1771624738.2299974},"140":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"108":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"246":{"2009":0,"2007":131332381.66999999,"2008":275547247.40999985,"total":1904668715.2899997,"2011":239557452.83000007,"2010":294782157.7400002,"2013":656278764.46,"2012":307170711.17999977},"384":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"566":{"2009":0,"2007":830788.36,"2008":566178.8,"total":8168312.769999999,"2011":2743995.4499999997,"2010":2394242.75,"2013":805279.14,"2012":827828.27},"232":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"048":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"388":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"548":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"100":{"2009":0,"2007":156407592.66000003,"2008":105469178.74000002,"total":541667611.8900001,"2011":84598811.90000004,"2010":48583084.95999999,"2013":79658144.54000004,"2012":66950799.08999998},"044":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"334":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"248":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"104":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"308":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"784":{"2009":0,"2007":1500.0,"2008":508.0,"total":4270039.12,"2011":135806.12,"2010":0.0,"2013":3999660.0000000005,"2012":132565.0},"328":{"2009":0,"2007":4900000.0,"2008":26425000.0,"total":144969594.2,"2011":19393458.2,"2010":21465000.0,"2013":47758444.0,"2012":25027692.0},"512":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"780":{"2009":0,"2007":449980.0,"2008":5460000.0,"total":95701516.0,"2011":16026000.0,"2010":10414000.0,"2013":62288322.0,"2012":1063214.0},"508":{"2009":0,"2007":2853775.96,"2008":10429845.42,"total":26183077.83,"2011":1928764.0899999999,"2010":8450683.0,"2013":0.0,"2012":2520009.3600000003},"703":{"2009":388.18,"2007":23657561.749999996,"2008":31194364.09,"total":322567901.45,"2011":50197723.65000004,"2010":39513884.64000001,"2013":114045275.02,"2012":63958704.11999997},"840":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"705":{"2009":0,"2007":30824996.87999999,"2008":57758104.77000001,"total":464720695.29999995,"2011":71009138.24999994,"2010":81090661.41999999,"2013":125619103.78,"2012":98418690.20000003},"418":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"600":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"148":{"2009":75.86,"2007":910721.18,"2008":266330.84,"total":10468832.2,"2011":532960.3300000001,"2010":2995741.0,"2013":3328361.4000000004,"2012":2434641.59},"788":{"2009":0,"2007":67449150.0,"2008":35015853.0,"total":577734484.07,"2011":262727822.6,"2010":2909301.2100000004,"2013":142873680.34000003,"2012":66758676.92},"604":{"2009":0,"2007":17165000.0,"2008":2009735.2300000002,"total":64093590.839999996,"2011":1309297.0,"2010":8210816.0,"2013":27088719.799999997,"2012":8310022.8100000005},"834":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"598":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"800":{"2009":1154.07,"2007":134743.53,"2008":3443132.38,"total":17930526.27,"2011":2807480.0,"2010":3741528.71,"2013":4883167.46,"2012":2919320.12},"499":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"768":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"642":{"2009":0,"2007":361010842.0300002,"2008":210836169.51000002,"total":1005047241.1700002,"2011":98786809.57000005,"2010":104077228.31999998,"2013":101601336.62000005,"2012":128734855.12},"234":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"688":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"438":{"2009":0,"2007":1078486.0,"2008":1070958.0,"total":10843359.39,"2011":855030.7699999999,"2010":579976.2500000001,"2013":5592339.6,"2012":1666568.7699999998},"646":{"2009":0,"2007":588436.0700000001,"2008":1659872.2599999998,"total":26993162.27,"2011":4064256.53,"2010":18328060.0,"2013":1696892.0,"2012":655645.4099999999},"474":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"352":{"2009":0,"2007":7752557.23,"2008":13018653.96,"total":108369843.78,"2011":25554986.43,"2010":7467412.430000002,"2013":18687090.759999998,"2012":35889142.970000006},"434":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"729":{"2009":0,"2007":939845.96,"2008":1080000.0,"total":19100348.69,"2011":4414625.0,"2010":3713904.59,"2013":4899968.0,"2012":4052005.14},"807":{"2009":0,"2007":3000299.74,"2008":10251615.309999999,"total":60664943.87999999,"2011":2913017.1599999997,"2010":2713834.3899999997,"2013":27612570.019999996,"2012":14173607.259999996},"004":{"2009":0,"2007":39718517.88000001,"2008":10403386.499999998,"total":119639398.15,"2011":12583796.120000001,"2010":15296320.120000001,"2013":20932435.94,"2012":20704941.589999996},"430":{"total":0,"2007":0,"2008":0,"2009":0,"2011":0,"2010":0,"2013":0,"2012":0},"804":{"2009":0,"2007":10213592.82,"2008":96738938.81000002,"total":442805761.73,"2011":179626921.97,"2010":113671538.24000001,"2013":26753776.68,"2012":15800993.209999995}}

test = d3.values(countrytotal)
console.log(test)

// Map
//////////////////////////////////////////////////////////////////////////////////////////////////////
function Map () {
	var mapwidth = $("#map").width(),
	    mapheight = mapwidth * 0.6125;
	if (mapheight > 500){
		var mapheight = 500;
	}

	var color = d3.scale.linear();

	var projection = d3.geo.mercator()
	    .center([20, 48])
	    .scale(500 )

	var path = d3.geo.path()
	    .projection(projection);

	var svgmap = d3.select("#map").append("svg")
	    .attr("width", mapwidth)
	    .attr("height", mapheight)

	d3.json("data/world-50m.json", function(error, world) {
	  if (error) throw error;
	  var countries = topojson.feature(world, world.objects.countries).features;

// reused from datamaps
	  svgmap.selectAll(".country")
	      .data(countries)
	    .enter().insert("path", ".graticule")
	    .attr("class", function(d) { 
	      if (EU.indexOf(d.id) !== -1) {
	        return "country " + "EU " + d.id;
	      }
	      else{
	        return "country " +  d.id;
	      }})
	    .attr("d", path)
	    .style("fill", function(d) {
	    	// if (typeof(countrytotal[d.id]) !== "undefined"){
	    	// console.log(d3.max(countrytotal[d.id]["total"])
	    	// }
	    	return "red"
	    	})


	  svgmap.insert("path", ".graticule")
	      .datum(topojson.mesh(world, world.objects.countries, function(a, b) { return a !== b; }))
	      .attr("class", "boundary")
	      .attr("d", path);
	})

	// d3.json("data/EC_countrytotal.json", function(error, data) {
	// 	if (error) throw error;
	// 	// for (d in data){
	// 	// console.log(data[d][Object.keys(data[d])[0]]["total"])
	// 	// }
	// 	svgmap.selectAll("")
	// 	.style("fill", function(){
	// 		if (true == true)
	// 			return "red"
	// 	})
	// })

}
//////////////////////////////////////////////////////////////////////////////////////////////////////

// Line chart
//////////////////////////////////////////////////////////////////////////////////////////////////////
function Line () {
// canvas size
	var linemargin = {top: 20, right: 20, bottom: 60, left: 50},
      linewidth = 400 - linemargin.left - linemargin.right,
      lineheight = 250  - linemargin.top - linemargin.bottom;

var parseDate = d3.time.format("%Y%m%d").parse,
	bisectDate = d3.bisector(function(d) { return d[0]; }).left;

// scaling
var x = d3.time.scale()
    .range([0, linewidth]);

var y = d3.scale.linear()
    .range([lineheight, 0]);

var xAxis = d3.svg.axis()
    .scale(x)
    .orient("bottom");

var yAxis = d3.svg.axis()
    .scale(y)
    .orient("left");

// line position
var pos = d3.svg.line()
    .x(function(d) { return x(d[0]); })
    .y(function(d) { return y(d[1]); });

// canvas
var svg = d3.select("#line").append("svg")
    .attr("width", linewidth + linemargin.left + linemargin.right)
    .attr("height", lineheight + linemargin.top + linemargin.bottom)
	.append("g")
    .attr("transform", "translate(" + linemargin.left + "," + linemargin.top + ")");

// import data and draw path and axis
d3.json("data/data.json", function(error, linedata) {
	if (error) throw error;

  linedata.forEach(function(d) {
    d[0] = parseDate(d[0]);
    d[1] = d[1] / 10
  });

  x.domain(d3.extent(linedata, function(d) { return d[0]; }));
  y.domain(d3.extent(linedata, function(d) { return d[1]; }));

svg.append("g")
  .attr("class", "x axis")
  .attr("transform", "translate(0," + lineheight + ")")
  .call(xAxis)
.selectAll("text")
  .attr("y", 5)
  .attr("x", 7)
  .attr("dy", ".35em")
  .attr("transform", "rotate(35)")
  .style("text-anchor", "start")


svg.append("g")
  .attr("class", "y axis")
  .call(yAxis)
.append("text")
  .attr("transform", "rotate(-90)")
  .attr("y", -35)
  .style("text-anchor", "end")
  .text("Temperature")

svg.append("path")
   .datum(linedata)
   .attr("class", "line")
   .attr("d", pos);
var focus = svg.append("g")
   .attr("class", "focus")
   .style("display", "none");


focus.append("line")
   .attr("class", "x")
   .style("stroke", "black")
   .attr("y1", 0)
   .attr("y2", lineheight);

focus.append("line")
   .attr("class", "y")
   .style("stroke", "black")
   .attr("x1", 0)
   .attr("x2", linewidth);

focus.append("text")
    .attr("class", "xt")
    .attr("dx", 8)
    .attr("dy", "-.3em");

focus.append("text")
    .attr("class", "yt")
    .attr("dx", 8)
    .attr("dy", "1em");


// svg.append("rect")
//     .attr("class", "overlay")
//     .attr("width", linewidth)
//     .attr("height", lineheight)
//     .on("mouseover", function() { focus.style("display", null); })
//     .on("mouseout", function() { focus.style("display", "none"); })
//     .on("mousemove", mousemove);


// function mousemove() {
// var x0 = x.invert(d3.mouse(this)[0]),
//     i = bisectDate(linedata, x0, 1),
//     d0 = linedata[i - 1],
//     d1 = linedata[i],
//     d = x0 - d0[0] > d1[0] - x0 ? d1 : d0;

// 	focus.select(".x")
// 	    .attr("transform","translate(" + x(d[0]) + ", 0)")
// 	               .attr("y2", lineheight);

// 	focus.select(".y")
// 	    .attr("transform","translate(0," +
// 	                         y(d[1]) + ")")
// 	               .attr("x2", linewidth);

	      
// 	focus.select("text.xt")
// 	    .attr("transform","translate( 0 ," + y(d[1]) + ")")
// 	    .text(d[1] + " C°");

// 	focus.select("text.yt")
// 	    .attr("transform","translate(" + x(d[0]) + ","+ (lineheight - 20) +")")
// 	    .text(d3.time.format("%d-%m-%Y")(d[0]));
// }
})
}
//////////////////////////////////////////////////////////////////////////////////////////////////////

// Bar chart
//////////////////////////////////////////////////////////////////////////////////////////////////////
function Bar () {
	var barmargin = {top: 20, right: 20, bottom: 30, left: 40},
	    barwidth = 400  - barmargin.left - barmargin.right,
	    barheight = 250  - barmargin.top - barmargin.bottom;

	var x = d3.scale.ordinal()
	    .rangeRoundBands([0, barwidth], .1);

	var y = d3.scale.linear()
	    .range([barheight, 0]);

	var xAxis = d3.svg.axis()
	    .scale(x)
	    .orient("bottom");

	var yAxis = d3.svg.axis()
	    .scale(y)
	    .orient("left")
	    .ticks(10, "%")

	var svg = d3.select("#bar").insert("svg")
	    .attr("width", barwidth + barmargin.left + barmargin.right)
	    .attr("height", barheight + barmargin.top + barmargin.bottom)
	  .append("g")
	    .attr("transform", "translate(" + barmargin.left + "," + barmargin.top + ")");

	d3.tsv("data/barchart.tsv", type, function(error, data) {
	  if (error) throw error;

	  x.domain(data.map(function(d) { return d.letter; }));
	  y.domain([0, d3.max(data, function(d) { return d.frequency; })]);

	  svg.append("g")
	      .attr("class", "x axis")
	      .attr("transform", "translate(0," + barheight + ")")
	      .call(xAxis);

	  svg.append("g")
	      .attr("class", "y axis")
	      .call(yAxis)
	    .append("text")
	      .attr("transform", "rotate(-90)")
	      .attr("y", 6)
	      .attr("dy", ".71em")
	      .style("text-anchor", "end")
	      .text("Frequency")
		.selectAll("text")
		  .style("text-size", "9px");

	  svg.selectAll(".bar")
	      .data(data)
	    .enter().append("rect")
	      .attr("class", "bar")
	      .attr("x", function(d) { return x(d.letter); })
	      .attr("width", x.rangeBand())
	      .attr("y", function(d) { return y(d.frequency); })
	      .attr("height", function(d) { return barheight - y(d.frequency); });
  d3.select("#sort").on("change", change);

  function change() {
    // clearTimeout(sortTimeout);

    // Copy-on-write since tweens are evaluated after a delay.
    var x0 = x.domain(data.sort(this.checked
        ? function(a, b) { return b.frequency - a.frequency; }
        : function(a, b) { return d3.ascending(a.letter, b.letter); })
        .map(function(d) { return d.letter; }))
        .copy();

    svg.selectAll(".bar")
        .sort(function(a, b) { return x0(a.letter) - x0(b.letter); });

    var transition = svg.transition().duration(750),
        delay = function(d, i) { return i * 50; };

    transition.selectAll(".bar")
        .delay(delay)
        .attr("x", function(d) { return x0(d.letter); });

    transition.select(".x.axis")
        .call(xAxis)
      .selectAll("g")
        .delay(delay);
  }
	});

	function type(d) {
	  d.frequency = +d.frequency;
	  return d;
	}


}

// // Downloadbutton
// //////////////////////////////////////////////////////////////////////////////////////////////////////
// var textFile = null,
// 		create = document.getElementById('downloadselection'),
//     textbox = document.getElementById('textbox');

// // https://stackoverflow.com/questions/21012580/is-it-possible-to-write-data-to-file-using-only-javascript
// makeTextFile = function(text) {
//       var data = new Blob([text], {
//         type: 'text/plain'
//       });

//       // If we are replacing a previously generated file we need to
//       // manually revoke the object URL to avoid memory leaks.
//       if (textFile !== null) {
//         window.URL.revokeObjectURL(textFile);
//       }

//       textFile = window.URL.createObjectURL(data);

//       return textFile;
//     };

//    create.addEventListener('click', function() {
//     create.href = makeTextFile(textbox.value);
//   }, false);
// //////////////////////////////////////////////////////////////////////////////////////////////////////
